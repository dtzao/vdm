<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>P√ÅGINA 1 - REGISTRO</title>

  <style>
  :root{
    --bg: #c40000;                  /* FUNDO VERMELHO */
    --panel: #000;                  /* CARD PRETO */
    --text: #fff;
    --muted: rgba(255,255,255,.72);
    --border: rgba(255,255,255,.20);

    /* MAIS ESTREITO (SOBRA LATERAL NO TEL√ÉO) */
    --maxw: 620px;

    /* MAIS COMPACTO */
    --radius: 14px;
    --pad: 10px;

    /* FONTES */
    --label: 12px;                  /* r√≥tulos menores */
    --inputFont: clamp(22px, 2.2vw, 34px);  /* <<< TEXTO DIGITADO GRANDE */
    --btnFont: 14px;

    --btnBg: #fff;
    --btnText: #000;
  }

  *{ box-sizing: border-box; }

  body{
    margin:0;
    background: var(--bg);
    font-family: Arial, sans-serif;
    color: var(--text);
    padding: 12px;
    text-transform: uppercase;
    letter-spacing: .35px;
  }

  .container{
    max-width: var(--maxw);
    margin: 0 auto;
    display: grid;
    justify-items: center;
    gap: 10px;
    padding-bottom: 70px;
  }

  .panel{
    width: 100%;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: var(--pad);
  }

  .topbar{
    width: 100%;
    display: grid;
    justify-items: center;
    gap: 8px;
  }

  label{
    font-weight: 1000;
    display: block;
    margin-bottom: 6px;
    font-size: var(--label);
    color: var(--muted);
    text-align: center;
  }

  .hint{
    font-size: 11px;
    opacity: .9;
    text-transform: none;
    letter-spacing: 0;
    text-align: center;
    color: rgba(255,255,255,.65);
    margin-top: 4px;
  }

  /* CAMPOS: PRETO/BRANCO + TEXTO DIGITADO GRANDE */
  .field{
    width: 100%;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: #000;
    color: #fff;
    font-weight: 1000;
    padding: 10px 12px;
    min-height: 44px;
    outline: none;
    text-align: center;
    font-size: var(--inputFont);   /* <<< AQUI AUMENTA MUITO */
    line-height: 1.15;
  }

  .field:focus{
    outline: 3px solid rgba(255,255,255,.9);
    outline-offset: 2px;
  }

  textarea.field{
    min-height: 62px;              /* menor pra ocupar menos */
    resize: vertical;
    text-align: center;
  }

  fieldset{ border:0; padding:0; margin:0; }

  legend{
    font-weight: 1000;
    margin-bottom: 8px;
    text-align: center;
    color: #fff;
    font-size: 16px;
  }

  /* 3 campos de cima mais compactos */
  .linha-unidade{
    display: grid;
    grid-template-columns: 90px 1fr 1fr;
    gap: 8px;
    align-items: start;
  }

  @media (max-width: 640px){
    .linha-unidade{ grid-template-columns: 1fr; }
  }

  /* Labels QRU/QTH/CARAC em cima, tudo central */
  .linha-campo{
    display: grid;
    gap: 6px;
    margin: 10px 0;
    justify-items: center;
  }

  .rotulo{
    width: 100%;
    text-align: center;
    font-weight: 1000;
    color: #fff;
    font-size: 14px;
  }

  .actions{
    display:flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin-top: 10px;
  }

  .button{
    padding: 10px 14px;
    background: var(--btnBg);
    color: var(--btnText);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 1000;
    font-size: var(--btnFont);
    text-transform: uppercase;
  }

  .button.secondary{
    background: transparent;
    border: 1px solid rgba(255,255,255,.45);
    color: #fff;
  }

  .nav-button{
    position: fixed;
    bottom: 12px;
    left: 12px;
    background: #fff;
    color: #000;
    font-weight: 1000;
    padding: 10px 14px;
    border-radius: 12px;
    text-decoration: none;
    box-shadow: 2px 2px 10px rgba(0,0,0,0.35);
  }

  .grupo-registro{
    width: 100%;
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(255,255,255,.18);
    border-radius: var(--radius);
    padding: 10px;
    margin-top: 10px;
  }
    /* ===== LOGOS LATERAIS ===== */
.lateral{
  position: fixed;
  top: 120px;
  bottom: 120px;
  width: 160px;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 2;
}

.lateral img{
  width: 140px;
  height: auto;
  opacity: 0.9;
  filter: drop-shadow(0 8px 20px rgba(0,0,0,.6));
}

.lateral.esquerda{ left: 16px; }
.lateral.direita{ right: 16px; }

/* EVITA TEXTO EMBAIXO DO LOGO */
.container{
  padding-left: 0px;
  padding-right: 0px;
}

/* NO CELULAR, SOME */
@media (max-width: 900px){
  .lateral{ display: none; }
  .container{
    padding-left: 0;
    padding-right: 0;
  }
}
</style>
</head>

<body>
  <!-- LOGOS LATERAIS - PAGINA 1 -->
<div class="lateral esquerda">
  <img src="imgb1.png" alt="Logo B P√°gina 1">
</div>

<div class="lateral direita">
  <img src="imgb1.png" alt="Logo B P√°gina 1">
</div>

  <main class="container">
    <!-- TOPO -->
    <section class="panel topbar">
      <div style="width:100%; max-width: 360px;">
        <label for="dataSelecionada">DATA DO REGISTRO</label>
        <input type="date" id="dataSelecionada" class="field" />
        <div class="hint">A DATA FICA SALVA AUTOMATICAMENTE.</div>
      </div>

      <button type="button" class="button" id="adicionarGrupo">+ ADICIONAR GRUPO</button>
    </section>

    <!-- GRUPOS -->
    <section class="panel" style="width:100%;">
      <div id="gruposContainer" aria-live="polite"></div>
    </section>

    <a href="pagina2.html" class="nav-button" aria-label="IR PARA VISUALIZA√á√ÉO">
      üìÑ VISUALIZA√á√ÉO
    </a>
  </main>

  <script>
    const campoData = document.getElementById('dataSelecionada');
    const gruposContainer = document.getElementById('gruposContainer');
    const btnAdicionar = document.getElementById('adicionarGrupo');

    const STORAGE_DATA_KEY = 'dataSelecionada';
    const STORAGE_REG_KEY = 'registrosPorDia';

    function safeParseJSON(value, fallback) {
      try { return value ? JSON.parse(value) : fallback; } catch { return fallback; }
    }
    function getRegistros() { return safeParseJSON(localStorage.getItem(STORAGE_REG_KEY), {}); }
    function setRegistros(obj) { localStorage.setItem(STORAGE_REG_KEY, JSON.stringify(obj)); }

    // DATA
    campoData.value = localStorage.getItem(STORAGE_DATA_KEY) || '';
    campoData.addEventListener('change', () => {
      localStorage.setItem(STORAGE_DATA_KEY, campoData.value);
    });

    function criarGrupo() {
      const form = document.createElement('form');
      form.className = 'grupo-registro';
      form.noValidate = true;

      const idGrupo = String(Date.now());

      form.innerHTML = `
        <fieldset>
          <legend>REGISTRO</legend>

          <div class="linha-unidade">
            <div>
              <label for="prefixo-${idGrupo}">PREFIXO</label>
              <input id="prefixo-${idGrupo}" name="prefixo" type="text" class="field"
                     maxlength="3" inputmode="numeric" aria-label="PREFIXO" />
            </div>

            <div>
              <label for="unidade-${idGrupo}">UNIDADE</label>
              <select id="unidade-${idGrupo}" name="unidade" class="field">
                <option value="¬∫ BPM/M">¬∫ BPM/M</option>
                <option value="¬∫ CPTRAN">¬∫ CPTRAN</option>
                <option value="¬∫ CHOQUE">¬∫ CHOQUE</option>
                <option value="¬∫ BAEP">¬∫ BAEP</option>
                <option value="¬∫ RODOVI√ÅRIA">¬∫ RODOVI√ÅRIA</option>
              </select>
            </div>

            <div>
              <label for="status-${idGrupo}">STATUS</label>
              <select id="status-${idGrupo}" name="status" class="field">
                <option value="NIHIL DE COP">NIHIL DE COP</option>
                <option value="COP SEM IMAGENS">COP SEM IMAGENS</option>
                <option value="COP LADO ESQUERDO">COP LADO ESQUERDO</option>
                <option value="COP LADO DIREITO">COP LADO DIREITO</option>
                <option value="COP EM AMBOS OS LADOS">COP EM AMBOS OS LADOS</option>
              </select>
            </div>
          </div>

          <div class="linha-campo">
            <div class="rotulo">QRU</div>
            <textarea id="qru-${idGrupo}" name="qru" class="field"></textarea>
          </div>

          <div class="linha-campo">
            <div class="rotulo">QTH</div>
            <textarea id="qth-${idGrupo}" name="qth" class="field"></textarea>
          </div>

          <div class="linha-campo">
            <div class="rotulo">CARACTER√çSTICAS</div>
            <textarea id="caract-${idGrupo}" name="caracteristicas" class="field"></textarea>
          </div>

          <div class="actions">
            <button type="submit" class="button">REGISTRAR</button>
            <button type="button" class="button secondary" data-action="remover">REMOVER GRUPO</button>
          </div>
        </fieldset>
      `;

      // remover grupo
      form.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-action="remover"]');
        if (!btn) return;
        form.remove();
      });

      // salvar registro
      form.addEventListener('submit', (e) => {
        e.preventDefault();

        const data = campoData.value;
        if (!data) {
          alert('SELECIONE UMA DATA!');
          campoData.focus();
          return;
        }

        const fd = new FormData(form);
        const registro = {
          horario: new Date().toLocaleTimeString('pt-BR'),
          prefixo: (fd.get('prefixo') || '').toString().trim(),
          unidade: (fd.get('unidade') || '').toString(),
          status: (fd.get('status') || '').toString(),
          qru: (fd.get('qru') || '').toString().trim(),
          qth: (fd.get('qth') || '').toString().trim(),
          caracteristicas: (fd.get('caracteristicas') || '').toString().trim(),
        };

        const registros = getRegistros();
        registros[data] = [registro, ...(registros[data] || [])];
        setRegistros(registros);

        form.reset();
      });

      return form;
    }

    btnAdicionar.addEventListener('click', () => {
      gruposContainer.appendChild(criarGrupo());
    });
  </script>
</body>
</html>
